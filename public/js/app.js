(()=>{var e,t={80:()=>{var e=!1,t=new Event("loading"),n=new Event("notloading"),o=OpenSeadragon({visibilityRatio:1,constrainDuringPan:!0,gestureSettingsMouse:{clickToZoom:!1,dblClickToZoom:!0},defaultZoomLevel:1,zoomInButton:"zoom-in",zoomOutButton:"zoom-out",homeButton:"home",timeout:1e5,showNavigationControl:!0,id:"openseadragon"}),d=new OpenSeadragon.Point;sendForm=function(e,a){document.dispatchEvent(t);var o=document.getElementById("image").files[0];note=document.getElementById("note").value,name=document.getElementById("name").value,form=new FormData,form.append("note",note),form.append("name",name),form.append("symbol",e),form.append("color",a),form.append("x",d.x),form.append("y",d.y),form.append("map_id",sessionStorage.getItem("currentMap")),form.append("image",o);var i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(document.dispatchEvent(n),draw())},i.open("POST","http://103.164.54.206/api/save",!0),i.send(form)},uploadPdf=function(){document.dispatchEvent(t);var e=document.getElementById("map_pdf").files[0];name=document.getElementById("map_name").value,form=new FormData,form.append("map_name",name),form.append("map_pdf",e);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE){var e=JSON.parse(a.responseText);loadMap(e.path,e.id),document.dispatchEvent(n)}},a.open("POST","http://103.164.54.206/api/new/map",!0),a.send(form)},new OpenSeadragon.MouseTracker({element:o.canvas,clickHandler:function(t){console.log(t);var n=t.position,a=o.viewport.windowToViewportCoordinates(n);if(d.x=a.x,d.y=a.y,t.shift)if(!0===e){name=sessionStorage.getItem("name"),image=sessionStorage.getItem("image"),note=sessionStorage.getItem("note"),color=sessionStorage.getItem("over_color"),symbol=sessionStorage.getItem("over_symbol"),map_id=sessionStorage.getItem("map_id"),form=new FormData,form.append("note",note),form.append("name",name),form.append("symbol",symbol),form.append("color",color),form.append("x",d.x),form.append("y",d.y),form.append("map_id",map_id),form.append("image",image);var i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(e=!1,draw())},i.open("POST","http://103.164.54.206/api/save/existing",!0),i.send(form)}else $("#dataSend").modal("show")}}),window.draw=function(){o.clearOverlays();var e=new XMLHttpRequest,t=sessionStorage.getItem("currentMap");sideOverlays=document.getElementById("sideOverlays"),sideOverlays.innerHTML=null,e.onreadystatechange=function(){if(e.readyState==XMLHttpRequest.DONE){var t=JSON.parse(e.responseText);for(elm in t)if(sessionStorage.getItem("currentMap")===t[elm].map_overlay_id){var n=new OpenSeadragon.Point;div=document.createElement("div"),div.id=t[elm].overlay_id,document.body.appendChild(div),span=document.createElement("span"),span.setAttribute("style","z-index:12;color:"+t[elm].color),span.innerHTML='<i class="'+t[elm].symbol+' customSym"><i class=" dot pulsate"></i></i>',span.setAttribute("id","renderer"+t[elm].overlay_id),div.appendChild(span),htmlx="<div id='parentModal"+t[elm].overlay_id+"' class='modal fade' tabindex='-1' aria-labelledby='exampleModalLabel' aria-hidden='true'>",htmlx+="  <div class='modal-dialog'>",htmlx+="   <div class='modal-content'>",htmlx+="     <div class='modal-header'>",htmlx+="      <h4 id='nameField' class='modal-title nameField'>"+t[elm].name+"</h4> ",htmlx+="       <button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button>",htmlx+="      </div>",htmlx+="     <div  class='modal-body'><img src="+t[elm].image+"  style='max-width: 100%; max-height: 100%' id='imageField' class='img-responsive'> <p class='col-md-12' id='noteField'>"+t[elm].note+"</p> </div>",htmlx+="     <div class='modal-footer'>",htmlx+="  <button type='button' class='btn btn-danger' onclick='deleteOverlay("+t[elm].overlay_id+")' data-bs-dismiss='modal'>Delete</button>",htmlx+="   </div></div> </div></div>",n.x=t[elm].x,n.y=t[elm].y,document.body.insertAdjacentHTML("beforeend",htmlx),o.addOverlay(div,n,OpenSeadragon.Placement.CENTER),span.setAttribute("onclick","renderOverlay("+t[elm].overlay_id+")"),a=document.createElement("a"),a.id="sideOver"+elm,div=document.createElement("div"),a.setAttribute("class","list-group-item list-group-item-action "),a.setAttribute("aria-current","true"),a.setAttribute("onclick","sideOverClicked("+a.id+',"'+t[elm].name+'","'+t[elm].image+'","'+t[elm].note+'","'+t[elm].color+'","'+t[elm].symbol+'","'+t[elm].map_overlay_id+'")'),div.setAttribute("class","d-flex w-100 justify-content-between"),div.innerHTML='<h5 class="mb-1">'+t[elm].name+"</h5>",div.innerHTML+='<small><i style="color:'+t[elm].color+'" onclick="renderOverlay('+t[elm].overlay_id+')" class="'+t[elm].symbol+'  customSym"></small>',a.appendChild(div),a.innerHTML+='<p class="mb-1">'+t[elm].note+"</p>",a.innerHTML+="<small>And some small print.</small>",sideOverlays.appendChild(a)}puls()}},e.open("get","http://103.164.54.206/api/retrive/"+t,!0),e.setRequestHeader("Accept","application/json"),e.send()},seekAndDestroy=function(){searchField=document.getElementById("search");var e=new XMLHttpRequest;sideOverlays=document.getElementById("sideOverlays"),e.onreadystatechange=function(){e.readyState==XMLHttpRequest.DONE&&$(searchField).on("input",(function(){sideOverlays.innerHTML=null;var t=JSON.parse(e.responseText);value=searchField.value;var n=new RegExp(value);t.forEach((function(e){found=e.name.match(n),found&&"/(?:)/"!=n&&(name=e.name,color=e.color,symbol=e.symbol,note=e.note,a=document.createElement("a"),a.id="sideOver"+e.overlay_id,div=document.createElement("div"),a.setAttribute("class","list-group-item list-group-item-action "),a.setAttribute("aria-current","true"),a.setAttribute("onclick","sideOverClicked(sideOver"+e.overlay_id+',"'+e.name+'","'+e.image+'","'+e.note+'","'+e.color+'","'+e.symbol+'","'+e.map_overlay_id+'")'),div.setAttribute("class","d-flex w-100 justify-content-between"),div.innerHTML='<h5 class="mb-1">'+name+"</h5>",div.innerHTML+='<small><i onclick="renderOverlay('+e.overlay_id+')" style="color:'+color+'" class="'+symbol+' customSym" ></small>',a.appendChild(div),a.innerHTML+='<p class="mb-1">'+note+"</p>",a.innerHTML+="<small>And some small print.</small>",sideOverlays.appendChild(a))}))}))},e.open("get","http://103.164.54.206/api/retrive/"+sessionStorage.getItem("currentMap"),!0),e.send()},renderOverlay=function(e){$("#parentModal"+e).modal("show")},deleteOverlay=function(e){removeElem=document.getElementById(e);var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState==XMLHttpRequest.DONE&&(removeElem.style="display:none",removeElem.remove())},t.open("DELETE","http://103.164.54.206/api/delete/"+e,!0),t.send()},puls=function(){$(".pulsate").jPulse({color:"#FF1414",size:150,speed:600,interval:2e3,left:0,top:0,zIndex:1})},jQuery(document).ready((function(){document.addEventListener("loading",(function(e){loader=document.createElement("div"),loader.classList.add("spinner"),loader.id="timewaster",img=document.createElement("img"),img.src="loader.gif",img.width=150,img.height=150,loader.appendChild(img),document.body.appendChild(loader)}),!1),document.addEventListener("notloading",(function(e){document.getElementById("timewaster").remove()}),!1),populateMaps=function(){var t=new XMLHttpRequest;ul=document.getElementById("mapsList"),t.onreadystatechange=function(){t.readyState==XMLHttpRequest.DONE&&JSON.parse(t.responseText).forEach((function(t){li=document.createElement("li"),li.id="map"+t.id,li.innerHTML+='<a class="dropdown-item" href="#">'+t.name+"</a>",li.onclick=e(t.path,t.id),ul.appendChild(li)}))},t.open("get","http://103.164.54.206/api/retrive/maps",!0),t.setRequestHeader("Accept","application/json"),t.send()};var e=function(e,t){return function(){loader=document.createElement("div"),loader.classList.add("spinner"),img=document.createElement("img"),img.src="loader.gif",img.width=150,img.height=150,loader.appendChild(img),document.body.appendChild(loader),loaded=!1,o.clearOverlays(),o.close(),o.open({type:"image",url:"http://103.164.54.206/"+e}),o.world.addOnceHandler("add-item",(function(){sessionStorage.setItem("currentMap",t),draw(),loader.remove()}))}},t=document.getElementById("sendFormButton"),n=document.getElementById("uploadPdfButton"),a=document.getElementById("searchInput"),d=document.getElementById("showUploadForm");document.getElementById("arrow").addEventListener("click",(function(){$("#sidebar").toggleClass("collapsed"),$("#arrow").toggleClass("left right"),$("#openseadragon").toggleClass("col-md-12 col-md-9")})),d.addEventListener("click",(function(){$("#uploadPdf").modal("show")})),a.addEventListener("click",(function(){return seekAndDestroy()})),n.addEventListener("click",(function(){return uploadPdf()})),t.addEventListener("click",(function(){return sendForm(sessionStorage.getItem("sym"),sessionStorage.getItem("color"))})),populateMaps()})),sideOverClicked=function(t,n,a,o,d,i,r){sessionStorage.setItem("name",n),sessionStorage.setItem("image",a),sessionStorage.setItem("note",o),sessionStorage.setItem("over_color",d),sessionStorage.setItem("over_symbol",i),sessionStorage.setItem("map_id",r),!1===e?(e=!0,$(t).addClass("active")):($(t+".active").removeClass("active"),e=!1)}},662:()=>{}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var d=n[e]={exports:{}};return t[e](d,d.exports,o),d.exports}o.m=t,e=[],o.O=(t,n,a,d)=>{if(!n){var i=1/0;for(m=0;m<e.length;m++){for(var[n,a,d]=e[m],r=!0,l=0;l<n.length;l++)(!1&d||i>=d)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(r=!1,d<i&&(i=d));if(r){e.splice(m--,1);var s=a();void 0!==s&&(t=s)}}return t}d=d||0;for(var m=e.length;m>0&&e[m-1][2]>d;m--)e[m]=e[m-1];e[m]=[n,a,d]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={773:0,170:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,d,[i,r,l]=n,s=0;for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(l)var m=l(o);for(t&&t(n);s<i.length;s++)d=i[s],o.o(e,d)&&e[d]&&e[d][0](),e[i[s]]=0;return o.O(m)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.O(void 0,[170],(()=>o(80)));var d=o.O(void 0,[170],(()=>o(662)));d=o.O(d)})();